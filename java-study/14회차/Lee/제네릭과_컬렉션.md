# 7. 제네릭과 컬렉션

## 컬렉션과 제네릭

### 컬렉션의 개념
컬렉션(collection)은 안드로이드를 비롯한 자바 프로그램을 작성하는데 빼놓을 수 없는 중요한 도구이다. 컬렉션은 제네릭(generic)이라는 기법으로 구현되어 있다.  
배열은 여러 개의 데이터를 다루는 데 편리한 자료 구조이지만, 삽입 삭제가 빈번하고, 데이터의 크기를 예측할 수 없는 응용프로그램에서 사용하기에는 불편하다.  
컬렉션은 배열이 가진 고정 크기의 단점을 극복하기 위해 객체들을 쉽게 삽입, 삭제, 검색할 수 있는 가변 크기의 컨테이너이다.  

#### 배열
- 고정 크기 이상의 객체를 관리할 수 없다.
- 배열의 중간에 객체가 삭제되면 응용프로그램에서 자리를 옮겨야 한다.

#### 컬렉션
- 가변 크기로서 객체의 개수를 염려할 필요 없다.
- 컬렉션 내의 한 객체가 삭제되면 컬렉션이 자동으로 자리를 옮겨준다.

### 컬렉션을 위한 자바 인터페이스와 클래스
컬렉션 클래스는 개발자가 바로 사용할 수 있는 것들로서, `Vector<E>`와 `ArrayList<E>`는 가변 크기의 배열을 구현하며, `LinkedList<E>`는 노드들이 링크로 연결되는 리스트를 구현한다. `Stack<E>`는 스택을 구현하며, `HashSet<E>`은 집합을 구현한다. 이들은 모두 `Collection<E>`를 상속받고, 단일 클래스의 객체만을 요소로 다루는 공통점이 있다.
이와 달리, `HashMap<K, V>`는 '키(K)'와 '값(V)'의 쌍으로 이루어지는 데이터를 저장하고, '키'로 쉽게 검색하도록 만든 컬렉션이다.

### 컬렉션의 특징
1. 컬렉션은 제네릭이라는 기법으로 만들어져 있다. 컬렉션 클래스의 이름에는 `<E>`, `<K>`, `<V>`등이 항상 포함된다. 이들을 '타입 매개변수'라고 하며, `Vector<E>`에서 E 대신 Integer와 같이 구체적인 타입을 지정하면, `Vector<Integer>`는 정수 값만 저장하는 벡터로, `Vector<String>`은 문자열만 저장하는 벡터로 사용할 수 있다. 특정 타입만 다루지 않고 여러 종류의 타입으로 쓸 수 있도록, 컬렉션을 일반화시키기 위해 `<E>`를 사용하는 것이다. 그러므로 E를 일반화시킨 타입 혹은 제네릭 타입이라고 부른다. 컬렉션은 여러 타입의 값을 다룰 수 있도록 변신이 가능한 자료 구조이지만, 컬렉션을 사용할 때는 지정된 특징 타입의 값만 저장 가능하다.
2. 컬렉션의 요소는 객체들만 가능하다. int, char, double 등의 기본 타입의 데이터는 원칙적으로 컬렉션의 요소로 불가능하다.
```java
Vector<int> v = new Vector<int>();          // 컴파일 오류. int는 사용 불가
Vector<Integer> v = new Vector<Integer>();  // 정상 코드
```
하지만, 기본 타입의 값이 삽입되면 자동 박싱에 의해 Wrapper 클래스 타입을 변환되어 객체로 저장한다.

### 제네릭의 기본 개념
제네릭은 모든 종류의 타입을 다룰 수 있도록, 클래스나 메소드를 타입 매개변수를 이용하여 선언하는 기법이다. 자바의 제네릭은 C++의 템플릿과 동일하다. 쉽게 말해서 '본 떠 찍어내기 위해 만들어진 틀'이다.  
제네릭은 클래스 코드를 찍어내듯이 생산할 수 있도록 일반화시키는 도구이다.
```java
class Stack<E> {
    ...
    void push(E element) { ... }
    E pop() { ... }
    ...
}
```
`Stack<E>`에서 E에 구체적인 타입을 지정하면, 지정된 타입만 다룰 수 있는 구체화된 스택이 된다.`Stack<Integer>`는 Integer 타입만 다루는 스택이 되고, `Stack<Point>`는 Point 타입의 객체만 푸시하고 팝할 수 있는 스택이 된다.

개발자가 필요한 웬만한 컬렉션 클래스들은 이미 JDK에 제네릭으로 만들어져 있기 때문에 JDK에 있는 컬렉션을 사용하는 방법을 아는 것이 바람직하다.

### 제네릭 타입 매개변수
컬렉션 클래스에서 타입 매개변수로 사용하는 문자는 다른 변수와 혼동을 피하기 위해 일반적으로 하나의 대문자를 사용한다. 다음은 관례적으로 사용하는 문자이다.
|문자|의미|
|---|---|
|E|Element를 의미하며 컬렉션에서 요소임을 나타냄|
|T|Type을 의미|
|V|Value를 의미|
|K|Key를 의미|